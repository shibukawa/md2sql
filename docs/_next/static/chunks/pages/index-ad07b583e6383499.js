(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(7562)}])},7562:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return A}});var l=a(603),n=a(5893),t=a(7294),r=a(9008),c=a.n(r),i=a(4298),d=a.n(i),o=a(5675),u=a.n(o),m=a(1163),x=a(5192),h=a(6671),f={src:"/md2sql/_next/static/media/GitHub-Mark-Light-64px.c00e4d6b.png",height:64,width:64,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAa0lEQVR42g3IsQnCUABF0aeVimDjBmIpyXTWuoCInaUDOIK4QSBBSJMNBEc438+BW9yIRqdUnUaiNRl9q9GkjUEvNlX0hihOYlbFWYniLuZVXJV4+ThaWdQW7zh4uljZKn52UZebpbWHvfwBU1FcIqo566kAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},b=a(115),j=a(8162),g=a.n(j)()("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),v=new TextEncoder,N=new TextDecoder,w=a(9495);function p(e){var s=e.src,a=e.className,l=(0,t.useRef)(null);return(0,t.useEffect)(function(){s&&w.Z.init({},l.current)},[l.current,s]),s?(0,n.jsx)("div",{className:a,ref:l,children:s},s):(0,n.jsx)("div",{className:a},s)}function q(e){var s=(0,t.useState)(e),a=s[0],l=s[1];return[a,(0,t.useCallback)(function(e){l(e.target.value)},[]),l]}var A=function(){var e=(0,m.useRouter)(),s=(0,l.Z)(q("sql"),3),a=s[0],r=s[1],i=s[2],o=(0,l.Z)(q("postgres"),3),j=o[0],w=o[1],A=o[2],k=(0,t.useState)(""),C=k[0],S=k[1],E=(0,t.useState)("preview"),U=E[0],y=E[1],R=(0,t.useRef)(""),_=(0,t.useState)(""),L=_[0],M=_[1];(0,t.useEffect)(function(){var s;i(e.query.f||"sql"),R.current=e.query.s?(s=e.query.s,N.decode(g.decode(s))):"# Sample Markdown\n\n* master: Users\n    * @id\n    * name: string\n    * $email: string\n    * age: integer\n\n* master: Jobs\n    * @id\n    * name: string\n\n* tran: Tasks\n    * @id\n    * user: *Users.id\n    * job: *Jobs.id\n    * date: Date\n\n* -tran: Memo\n    * @task: *Tasks.id\n    * @index\n    * memo: string\n",S(R.current),y(e.query.t||"preview"),A(e.query.d||"postgres")},[e.isReady]);var Q=(0,t.useCallback)(function(e){R.current=e.target.value},[]);(0,t.useEffect)(function(){""!==L&&B()},[a]);var B=(0,t.useCallback)(function(){var s,l;switch(a){case"sql":s=md2sql.toSQL(R.current,j);break;case"plantuml":s=md2sql.toPlantUML(R.current);break;default:s=md2sql.toMermaid(R.current)}s.ok?(M(s.result),e.replace({query:{f:a,s:(l=R.current,g.encode(v.encode(l))),t:U,d:j}},void 0,{shallow:!0})):console.error(s.message)},[a,j]),I=(0,t.useCallback)(function(){navigator.clipboard.writeText(L)},[L]);return(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)(c(),{children:[(0,n.jsx)("title",{children:"md2sql"}),(0,n.jsx)("meta",{name:"description",content:"Generate SQL/ERD from Markdown"}),(0,n.jsx)("link",{rel:"icon",href:"/md2sql/favicon.ico"})]}),(0,n.jsx)(d(),{id:"exec-wasm",src:"/md2sql/wasm_exec.js",onLoad:function(){var e=new Go;WebAssembly.instantiateStreaming(fetch("/md2sql/md2sql.wasm"),e.importObject).then(function(s){e.run(s.instance)})}}),(0,n.jsxs)("header",{className:"navbar mb-2 shadow-lg bg-neutral text-neutral-content rounded-box",children:[(0,n.jsx)("div",{className:"flex-1 px-2 mx-2",children:(0,n.jsx)("span",{className:"text-lg font-bold",children:"md2sql"})}),(0,n.jsx)("div",{className:"flex-none",children:(0,n.jsx)("a",{className:"btn btn-square btn-ghost",href:"https://github.com/shibukawa/md2sql",children:(0,n.jsx)(u(),{src:f,alt:"github"})})})]}),(0,n.jsxs)("main",{className:"main flex flex-col w-full grow lg:flex-row items-stretch",children:[(0,n.jsxs)("div",{className:"flex flex-grow h-full card rounded-box shadow-2xl p-6",children:[(0,n.jsx)("h2",{className:"grow-0 font-medium leading-tight text-4xl mt-0 mb-2 text-blue-600",children:"Markdown Source"}),C?(0,n.jsx)("textarea",{className:"m-6 p-1 textarea textarea-bordered grow h-full",onInput:Q,defaultValue:C}):(0,n.jsx)("textarea",{className:"m-6 p-1 textarea textarea-bordered grow h-full"}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsxs)("div",{className:"form-control mx-1",children:[(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text",children:"Export Format"})}),(0,n.jsxs)("select",{className:"select select-bordered",value:a,onChange:r,children:[(0,n.jsx)("option",{value:"sql",children:"SQL"}),(0,n.jsx)("option",{value:"mermaid",children:"Mermaid.js"}),(0,n.jsx)("option",{value:"plantuml",children:"PlantUML"})]})]}),"sql"===a?(0,n.jsxs)("div",{className:"form-control mx-1",children:[(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text",children:"Dialect"})}),(0,n.jsxs)("select",{className:"select select-bordered",value:j,onChange:w,children:[(0,n.jsx)("option",{value:"postgres",children:"PostgreSQL"}),(0,n.jsx)("option",{value:"mysql",children:"MySQL"}),(0,n.jsx)("option",{value:"sqlite",children:"SQLite"})]})]}):null]})]}),(0,n.jsx)("div",{className:"divider lg:divider-vertical"}),(0,n.jsxs)("div",{className:"flex flex-grow h-full card rounded-box shadow-2xl p-6",children:[(0,n.jsxs)("h2",{className:"grow-0 font-medium leading-tight text-4xl mt-0 mb-2 text-blue-600",children:["Result","sql"!==a?(0,n.jsxs)("div",{className:"tabs",children:[(0,n.jsx)("a",{className:"tab tab-lifted ".concat("preview"===U?"tab-active":""),onClick:function(){y("preview")},children:"Preview"}),(0,n.jsx)("a",{className:"tab tab-lifted ".concat("src"===U?"tab-active":""),onClick:function(){y("src")},children:"Source"})]}):null]}),(0,n.jsxs)("div",{className:"grow-0 flex w-full",children:[(0,n.jsx)("button",{className:"btn m-1",onClick:B,children:"Generate"}),(0,n.jsx)("button",{className:"btn m-1",disabled:""===L,onClick:I,children:"Copy To Clipboard"})]}),"sql"===a||"src"===U?(0,n.jsx)("div",{className:"grow m-2",children:(0,n.jsx)(x.Z,{language:a,style:h.Ro,className:"h-full rounded-md border border-slate-300 text-xs",children:L})}):"mermaid"===a?(0,n.jsx)(p,{className:"grow m-2",src:L}):"plantuml"===a?(0,n.jsx)(b.h,{src:L,className:"grow m-2"},"".concat(a).concat(L).concat(U)):null]})]})]})}}},function(e){e.O(0,[578,914,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);